<mat-card class="climb-card" [routerLink]="['/climb-detail', climb.routeId]">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>terrain</mat-icon>
      Route #{{ climb.routeId }}
    </mat-card-title>
    <mat-card-subtitle>{{ climb.setDate }}</mat-card-subtitle>
  </mat-card-header>
  
  <mat-card-content>
    <div class="climb-info">
      <mat-chip-set>
        <mat-chip class="grade-chip">
          <mat-icon>trending_up</mat-icon>
          {{ climb.grade }}
        </mat-chip>
        <mat-chip [class]="'status-chip status-' + climb.status.toLowerCase()">
          <mat-icon>flag</mat-icon>
          {{ climb.status }}
        </mat-chip>
      </mat-chip-set>
    </div>
    <div class="avg-rating" *ngIf="avgRating !== undefined; else noAvg">
      Average: {{ avgRating | number:'1.2-2' }}
    </div>
    <ng-template #noAvg>
      <div class="avg-rating">Average: â€“</div>
    </ng-template>

    <!-- User Rating: klickbare Sterne -->
    <div class="user-rating" *ngIf="climb?.userId">
      <span>User Rating:</span>
      <button mat-icon-button *ngFor="let s of [1,2,3,4,5]" (click)="rateClimb(s); $event.stopPropagation()">
        <mat-icon [class.filled]="(userRating ?? 0) >= s">star</mat-icon>
      </button>
    </div>
  </mat-card-content>
  
  <mat-card-actions>
    <button mat-raised-button color="primary" (click)="updateClimbStatus(climb.routeId, 'Top'); $event.stopPropagation()">
      <mat-icon>check_circle</mat-icon>
      Top
    </button>
    <button mat-raised-button color="accent" (click)="updateClimbStatus(climb.routeId, 'Flash'); $event.stopPropagation()">
      <mat-icon>bolt</mat-icon>
      Flash
    </button>
    <button mat-raised-button (click)="updateClimbStatus(climb.routeId, 'Attempted'); $event.stopPropagation()">
      <mat-icon>hourglass_empty</mat-icon>
      Attempt
    </button>
    <button mat-raised-button color="warn" (click)="deleteClimb(); $event.stopPropagation()" class="delete-btn">
      <mat-icon>delete</mat-icon>
      Delete
    </button>
  </mat-card-actions>
</mat-card>
